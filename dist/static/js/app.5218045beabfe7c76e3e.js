webpackJsonp([1],{FKsp:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("//Fk"),r=a.n(n),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-primary"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("KH Blog")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[t._m(1),t._v(" "),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Articles")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuLink"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/new-post"}},[t._v("Write New Article")]),t._v(" "),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/posts"}},[t._v("Viee All Post")])],1)])]),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-item active"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[this._v("\n          Home\n          "),e("span",{staticClass:"sr-only"},[this._v("(current)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[this._v("Login")])]),this._v(" "),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[this._v("Register")])])])}]};var o=a("VU/8")({name:"Header"},i,!1,function(t){a("xguh")},null,null).exports,l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"mt-5"},[e("div",{staticClass:"container-fluid bg-primary py-3"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row py-3"},[e("div",{staticClass:"col-md-9"},[e("p",{staticClass:"text-white"},[this._v("KH Blog")])]),this._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"d-inline-block"},[e("div",{staticClass:"bg-circle-outline d-inline-block"},[e("a",{staticClass:"text-white",attrs:{href:"https://www.facebook.com/"}},[e("i",{staticClass:"fa fa-facebook",attrs:{"aria-hidden":"true"}})])]),this._v(" "),e("div",{staticClass:"bg-circle-outline d-inline-block"},[e("a",{staticClass:"text-white",attrs:{href:"https://twitter.com/"}},[e("i",{staticClass:"fa fa-2x fa-fw fa-twitter"})])]),this._v(" "),e("div",{staticClass:"bg-circle-outline d-inline-block"},[e("a",{staticClass:"text-white",attrs:{href:"https://www.linkedin.com/company/"}},[e("i",{staticClass:"fa fa-2x fa-fw fa-linkedin"})])])])])])])])])}]};var c=a("VU/8")({name:"Footer"},l,!1,function(t){a("NQ8T")},null,null).exports,u=(a("FKsp"),{computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push("/login")})}},components:{Header:o,Footer:c},created:function(){this.$http.interceptors.response.use(void 0,function(t){return new r.a(function(e,a){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch(logout),t})})}}),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("Header"),this._v(" "),e("div",{staticClass:"container"},[e("router-view")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("q5bO")},null,null).exports,v=a("NYxO"),f=a("mtWM"),p=a.n(f);s.a.use(v.a);var h=new v.a.Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a){t.status="success",t.token=e,t.user=a},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},actions:{login:function(t,e){var a=t.commit;return new r.a(function(t,s){a("auth_request"),p()({url:"http://kh-blog-app.herokuapp.com/login",data:e,method:"POST"}).then(function(e){var s=e.data.token,n=e.data.user;localStorage.setItem("token",s),p.a.defaults.headers.common.Authorization=s,a("auth_success",s,n),t(e)}).catch(function(t){console.log(t),a("auth_error"),localStorage.removeItem("token"),s(t)})})},register:function(t,e){var a=t.commit;return new r.a(function(t,s){a("auth_request"),p()({url:"http://localhost:3000/register",data:e,method:"POST"}).then(function(e){var s=e.data.token,n=e.data.user;localStorage.setItem("token",s),p.a.defaults.headers.common.Authorization=s,a("auth_success",s,n),t(e)}).catch(function(t){a("auth_error",t),localStorage.removeItem("token"),s(t)})})},logout:function(t){var e=t.commit;return new r.a(function(t,a){e("logout"),localStorage.removeItem("token"),delete p.a.defaults.headers.common.Authorization,t()})}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),_=(a("7t+N"),a("K3J8"),a("qb6w"),a("/ocq")),g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h2",[this._v("Opens in seconds")])])}]};var w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v("Special title treatment")]),t._v(" "),a("p",{staticClass:"card-text"},[t._v("With supporting text below as a natural lead-in to additional content.")]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[t._v("Go somewhere")])])])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v("Special title treatment")]),t._v(" "),a("p",{staticClass:"card-text"},[t._v("With supporting text below as a natural lead-in to additional content.")]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"#"}},[t._v("View Post")]),t._v(" "),a("a",{staticClass:"btn btn-success",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v("\n            Edit\n          ")]),t._v(" "),a("a",{staticClass:"btn btn-danger",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}}),t._v("\n            Delete\n          ")])])])])])])}]};var C={name:"Login",data:function(){return{email:"",password:""}},methods:{login:function(){var t=this,e=this.email;console.log(this.$store);var a=this.password;this.$store.dispatch("login",{email:e,password:a}).then(function(){return t.$router.push("/")}).catch(function(t){return console.log(t)})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper fadeInDown mt-4"},[a("div",{attrs:{id:"formContent"}},[t._m(0),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"fadeIn second",attrs:{type:"email",id:"login",name:"email",required:"",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"fadeIn third",attrs:{type:"password",id:"password",name:"login",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),a("button",{staticClass:"fadeIn fourth",attrs:{type:"submit"}},[t._v("Sign In")])]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fadeIn first"},[e("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"formFooter"}},[e("a",{staticClass:"underlineHover",attrs:{href:"#"}},[this._v("Forgot Password?")])])}]};var k={name:"Register",data:function(){return{name:"",email:"",password:"",password_confirmation:"",is_admin:null}},methods:{register:function(){var t=this,e={name:this.name,email:this.email,password:this.password,is_admin:this.is_admin};this.$store.dispatch("register",e).then(function(){return t.$router.push("/")}).catch(function(t){return console.log(t)})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v("Register")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[a("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text",required:"",autofocus:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("label",{attrs:{for:"email"}},[t._v("E-Mail Address")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("label",{attrs:{for:"password-confirm"}},[t._v("Confirm Password")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],attrs:{id:"password-confirm",type:"password",required:""},domProps:{value:t.password_confirmation},on:{input:function(e){e.target.composing||(t.password_confirmation=e.target.value)}}})]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{attrs:{type:"submit"}},[this._v("Register")])])}]};var $=[{path:"/",name:"HelloWorld",component:a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},g,!1,function(t){a("Ra56")},"data-v-7f1604b5",null).exports},{path:"/posts",name:"posts",meta:{requiresAuth:!0},component:a("VU/8")({name:"Posts"},w,!1,function(t){a("Smf9")},null,null).exports},{path:"/login",name:"login",component:a("VU/8")(C,b,!1,function(t){a("d+pr")},"data-v-dfad4398",null).exports},{path:"/register",name:"register",component:a("VU/8")(k,x,!1,function(t){a("sWu3")},null,null).exports}];s.a.use(_.a);var y=new _.a({routes:$,mode:"history"});y.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth})){if(h.getters.isLoggedIn)return void a();a("/login")}else a()});var E=y;s.a.prototype.$http=p.a;var I=localStorage.getItem("token");I&&(s.a.prototype.$http.defaults.headers.common.Authorization=I),s.a.config.productionTip=!1,new s.a({el:"#app",router:E,store:h,render:function(t){return t(m)}})},NQ8T:function(t,e){},Ra56:function(t,e){},Smf9:function(t,e){},"d+pr":function(t,e){},q5bO:function(t,e){},qb6w:function(t,e){},sWu3:function(t,e){},xguh:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5218045beabfe7c76e3e.js.map